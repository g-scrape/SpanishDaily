<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Daily</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link id="stylesheet" rel='stylesheet' href='/static/light-theme.css'>
  
  </head>
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdn.ckeditor.com/4.6.2/basic/ckeditor.js"></script>
    <script type="text/javascript">
      CKEDITOR.replace('editor')
    </script>
    <script>
      const stylesheet = document.getElementById("stylesheet");

      // Check if the theme is already saved in local storage
      const currentTheme = localStorage.getItem("theme");

      //set theme to match local local storage 
      if (currentTheme && currentTheme.includes("light")) {
        stylesheet.href = "/static/light-theme.css";
        localStorage.setItem("theme", "/static/light-theme.css");
      } else if (currentTheme && currentTheme.includes("dark")) {
        stylesheet.href = "/static/dark-theme.css";
        localStorage.setItem("theme", "/static/dark-theme.css");
      }

    </script>
    {% include 'includes/_navbar.html' %}
    <div class="container">
      {% include 'includes/_messages.html' %}
      {% block body %}{% endblock %}
    </div>

    <script type="text/javascript">
    const toggleButton = document.getElementById("toggle-button");
    const stylesheetToggle = document.getElementById("stylesheet");

    // Check if the theme is already saved in local storage
    const currentThemeToggle = localStorage.getItem("theme");

      // if theme is saved in local storage ,set it accordingly
      if (currentThemeToggle) {
        stylesheetToggle.href = currentThemeToggle;
        if (currentThemeToggle.includes("light")) {
          toggleButton.checked = false
        } else {
          toggleButton.checked = true
        }
      }

    // Create a function to toggle the theme
    function toggleTheme() {
      console.log('here')
      if (stylesheetToggle.href.includes("light")) {
        stylesheetToggle.href = "/static/dark-theme.css";
        localStorage.setItem("theme", "/static/dark-theme.css");
      } else {
        stylesheetToggle.href = "/static/light-theme.css";
        localStorage.setItem("theme", "/static/light-theme.css");
      }
    };

    // Attach the toggle function to the toggle button
    toggleButton.addEventListener("click", toggleTheme);

//code for profile subscription toggle
  $('#toggle-sub').change(function() {

    console.log('here')
    if (this.checked) {
      // alert('You are subscribed!')
      
    } else if (!this.checked) {
      // alert('You have un-subcribed. Your account will be deleted in 30 days if you do not re-subscribe.')
    }

    $('#subForm').submit();
    console.log('form submitted')
  });

    </script>
  </body>
</html>
